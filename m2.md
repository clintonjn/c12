# Custom Fonts Implementation in React Native

## Overview

This document covers the implementation of custom fonts (Ubuntu Mono) in our React Native project, including challenges encountered and solutions applied.

## Implementation Steps

### 1. Font Selection and Download

- **Chosen Font**: Ubuntu Mono family
- **Variants**: Regular, Bold, Italic, Bold Italic
- **Source**: Google Fonts
- **File Format**: TTF files

### 2. Project Structure Setup

```
src/
├── assets/
│   └── fonts/
│       ├── UbuntuMono-Regular.ttf
│       ├── UbuntuMono-Bold.ttf
│       ├── UbuntuMono-Italic.ttf
│       └── UbuntuMono-BoldItalic.ttf
├── constants/
│   └── fonts.ts
└── utils/
    ├── platformUtil.ts
    └── fontFamily.ts
```

### 3. Configuration Files

#### react-native.config.js

```js
module.exports = {
  project: {
    ios: {},
    android: {},
  },
  assets: ['./src/assets/fonts'],
};
```

#### Platform Utility (src/utils/platformUtil.ts)

```ts
import { Platform } from 'react-native';

export const isIOS = () => {
  return Platform.OS === 'ios';
};
```

#### Font Constants (src/constants/fonts.ts)

```ts
import { isIOS } from '../utils/platformUtil';

export const fontFamilies = {
  UBUNTU_MONO: {
    regular: isIOS() ? 'Ubuntu Mono' : 'Ubuntu Mono',
    bold: isIOS() ? 'Ubuntu Mono' : 'Ubuntu Mono',
    italic: isIOS() ? 'UbuntuMono-Italic' : 'UbuntuMono-Italic',
    boldItalic: isIOS() ? 'UbuntuMono-BoldItalic' : 'UbuntuMono-BoldItalic',
  },
};
```

#### Font Utility (src/utils/fontFamily.ts)

```ts
import { fontFamilies } from '../constants/fonts';

export const getFontFamily = (
  fontType: 'UBUNTU_MONO' = 'UBUNTU_MONO',
  weight: 'regular' | 'bold' | 'italic' | 'boldItalic' = 'regular'
) => {
  const selectedFontFamily = fontFamilies[fontType];
  return selectedFontFamily[weight] || fontFamilies.UBUNTU_MONO.regular;
};
```

## Issues Encountered and Solutions

### Issue 1: react-native-asset Command Failed

**Problem**: `npx react-native-asset` didn't copy fonts to Android assets folder.

**Solution**: Manual font copying

```bash
mkdir -p android/app/src/main/assets/fonts
cp src/assets/fonts/*.ttf android/app/src/main/assets/fonts/
```

**Root Cause**: The automated asset linking sometimes fails, especially in Expo bare workflow projects.

### Issue 2: Font Names Not Recognized

**Problem**: Fonts appeared as system default despite being copied to assets.

**Attempted Solutions**:

1. Used exact file names: `UbuntuMono-Regular`
2. Used names with hyphens: `Ubuntu-Mono-Regular`
3. Used names with spaces: `Ubuntu Mono Regular`
4. Used camelCase: `UbuntuMonoRegular`

**Working Solution**: Base font family name with React Native properties

```js
// ✅ Working approach
{
  fontFamily: 'Ubuntu Mono',
  fontWeight: 'bold', // for bold variant
}

// ❌ Not working
{
  fontFamily: 'UbuntuMono-Bold',
}
```

### Issue 3: Italic Fonts Not Working

**Problem**: `fontStyle: 'italic'` didn't automatically find italic font files.

**Current Status**:

- ✅ **Working**: Regular and Bold (using `fontWeight`)
- ❌ **Not Working**: Italic variants (React Native limitation)

**Workaround**: Preserved italic font mappings in constants for future use, but currently only using regular and bold variants.

## Current Implementation

### Working Font Usage

```js
// Title - Bold
{
  fontFamily: 'Ubuntu Mono',
  fontWeight: 'bold',
}

// Subtitle - Regular
{
  fontFamily: 'Ubuntu Mono',
  fontWeight: 'normal',
}
```

### Welcome Screen Implementation

```js
export default function App() {
  return (
    <View style={styles.container}>
      <Text style={styles.title}>Welcome to C12</Text>
      <Text style={styles.subtitle}>
        Your basic app for all your requirements
      </Text>
    </View>
  );
}
```

## Key Learnings

### 1. Font Linking Reliability

- `react-native-asset` can be unreliable in some project setups
- Manual copying to `android/app/src/main/assets/fonts/` is more reliable
- Always verify fonts are copied: `ls android/app/src/main/assets/fonts/`

### 2. Font Naming Conventions

- Base font family names work better than specific variant names
- Use React Native's `fontWeight` and `fontStyle` properties when possible
- Font file names don't always match the internal font family names

### 3. Platform Differences

- iOS and Android may require different font name formats
- Always test on both platforms
- Consider using platform-specific font names in constants

### 4. React Native Font Limitations

- `fontWeight: 'bold'` works reliably across platforms
- `fontStyle: 'italic'` has known limitations and may not work automatically
- Some font variants may need explicit font file references

## Future Improvements

### 1. Italic Font Support

- Investigate platform-specific font registration
- Consider using separate font files for italic variants
- Test with different font linking approaches

### 2. Font Loading Verification

- Add font loading detection
- Implement fallback mechanisms
- Create development-time font debugging tools

### 3. Performance Optimization

- Minimize font file sizes
- Load only required font variants
- Consider font subsetting for production

## Troubleshooting Guide

### Fonts Not Loading

1. Check if fonts exist: `ls android/app/src/main/assets/fonts/`
2. Verify font names in code match actual font family names
3. Try rebuilding: `npm run prebuild:dev`
4. Test with base font family name + `fontWeight`

### Fonts Look the Same

1. Ensure fonts are properly copied to assets
2. Check font family name spelling
3. Verify font files are valid TTF files
4. Compare with system font to confirm custom fonts are loading

### Build Issues

1. Clean and rebuild project after adding new fonts
2. Ensure `react-native.config.js` points to correct font directory
3. Check for font file naming conflicts

## References

- [React Native Custom Fonts Documentation](https://reactnative.dev/docs/custom-fonts)
- [Expo Font Documentation](https://docs.expo.dev/guides/using-custom-fonts/)
- [Medium Article: Custom fonts in React Native](https://medium.com/@noamkurtzer/custom-fonts-in-react-native-step-by-step-guide-2c8e8a5a6e9f)
